import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt

# =========================
# ุชุญููู ุงูุจูุงูุงุช
# =========================
df = pd.read_csv("dailysales.csv")

# =========================
# ุฅุนุฏุงุฏ ูุงุฌูุฉ ุงูุชุทุจูู
# =========================
st.set_page_config(page_title="ููุญุฉ ูุชุงุจุนุฉ ุงููุจูุนุงุช", page_icon="๐", layout="wide")

st.title("๐ ููุญุฉ ูุชุงุจุนุฉ ุงููุจูุนุงุช")
st.markdown("ูุฑุญุจุงู ุจู ูู ููุญุฉ ูุชุงุจุนุฉ ุฃุฏุงุก ููุฏูุจู ุงููุจูุนุงุช")

# =========================
# KPIs (ูุคุดุฑุงุช ุณุฑูุนุฉ)
# =========================
total_sales = df["ุตุงูู ุงููุจูุนุงุช"].sum()
avg_target = df["ูุฏู ุงููุจูุนุงุช"].mean()
achievement_rate = (df["ุตุงูู ุงููุจูุนุงุช"].sum() / df["ูุฏู ุงููุจูุนุงุช"].sum()) * 100

col1, col2, col3 = st.columns(3)
col1.metric("ุฅุฌูุงูู ุงููุจูุนุงุช", f"{total_sales:,.0f} ุฌููู")
col2.metric("ูุชูุณุท ุงููุฏู", f"{avg_target:,.0f} ุฌููู")
col3.metric("ูุณุจุฉ ุชุญููู ุงูุฃูุฏุงู", f"{achievement_rate:.2f}%")

# =========================
# ุนุฑุถ ุงูุฌุฏูู ูุงูู
# =========================
st.subheader("๐ ุจูุงูุงุช ุชูุตูููุฉ")
st.dataframe(df, use_container_width=True)

# =========================
# ุฑุณู ุจูุงูู: ุงููุจูุนุงุช ููุงุจู ุงููุฏู
# =========================
st.subheader("๐ ููุงุฑูุฉ ุงููุจูุนุงุช ูุน ุงูุฃูุฏุงู")

fig, ax = plt.subplots(figsize=(10,5))
ax.bar(df["ุงุณู ุงูููุฏูุจ"], df["ูุฏู ุงููุจูุนุงุช"], label="ุงููุฏู", alpha=0.6)
ax.bar(df["ุงุณู ุงูููุฏูุจ"], df["ุตุงูู ุงููุจูุนุงุช"], label="ุตุงูู ุงููุจูุนุงุช", alpha=0.8)
ax.set_ylabel("ุงููููุฉ")
ax.set_xlabel("ุงูููุฏูุจ")
ax.set_title("ููุงุฑูุฉ ุงููุจูุนุงุช ูุน ุงููุฏู")
ax.legend()
st.pyplot(fig)

# =========================
# ุฑุณู ุจูุงูู: ูุณุจุฉ ุชุญููู ุงูุฃูุฏุงู
# =========================
st.subheader("๐ฏ ูุณุจุฉ ุชุญููู ุงููุฏู ููู ููุฏูุจ")
st.bar_chart(df.set_index("ุงุณู ุงูููุฏูุจ")["ุชุญููู ุงููุฏู"])
